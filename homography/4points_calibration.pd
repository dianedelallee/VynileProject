#N canvas 95 22 887 639 10;
#X declare -lib iemmatrix -lib 0.2;
#X text 212 153 MATRIX A;
#X obj 240 217 t a a;
#X text 379 189 MATRIX B;
#X obj 267 154 t a a b;
#X msg 84 394 \$3 \$4 \$5;
#X msg 165 454 \$6 \$7 \$8;
#X msg 333 439 \$9 \$10;
#X obj 36 301 t a a a;
#X obj 18 563 *;
#X obj 78 565 *;
#X obj -13 447 expr ($f3*$f1)+($f4*$f2)+$f5;
#X obj 83 502 expr ($f3*$f1)+($f4*$f2)+$f5;
#X obj 290 501 expr 1/(($f1*$f3)+($f2*$f4)+1);
#X obj 309 20 inlet 4points;
#X obj 27 143 inlet coordsXY_ToBeMapped;
#X obj 27 585 pack f f;
#X obj -1 612 outlet MappedCoords;
#N canvas 142 22 844 578 theory/explanations/sources 0;
#X text 106 332 l=(A A) A B;
#X text 130 325 T -1 T;
#X text 47 157 l=;
#X text 68 116 a;
#X text 67 127 b;
#X text 67 139 c;
#X text 68 152 d;
#X text 67 163 e;
#X text 69 174 f;
#X text 68 183 g;
#X text 70 195 h;
#X text 143 158 B=;
#X text 161 119 X1;
#X text 161 132 Y1;
#X text 162 143 X2;
#X text 162 156 Y2;
#X text 162 170 X3;
#X text 163 183 Y3;
#X text 164 194 X4;
#X text 164 203 Y4;
#X text 122 56 Al=B;
#X text 400 260 B=;
#X text 471 245 1;
#X text 472 283 1;
#X text 472 296 1;
#X text 475 307 1;
#X text 652 258 A=;
#X text 417 216 X1;
#X text 417 229 Y1;
#X text 418 240 X2;
#X text 418 253 Y2;
#X text 418 267 X3;
#X text 419 280 Y3;
#X text 417 293 X4;
#X text 418 309 Y4;
#X text 679 237 x2 y2 1 0 0 0 -x2 -y2;
#X text 678 284 0 0 0 x3 y3 1 -x3 -y3;
#X text 679 297 x4 y4 1 0 0 0 -x4 -y4;
#X text 679 313 0 0 0 x4 y4 1 -x4 -y4;
#X text 466 218 -1;
#X text 468 233 -1;
#X text 468 256 -1;
#X text 466 266 -1;
#X text 678 204 x1 y1 1 0 0 0 x1 y1;
#X text 679 221 0 0 0 x1 y1 1 x1 y1;
#X text 678 253 0 0 0 x2 y2 1 x2 y2;
#X text 678 268 x3 y3 1 0 0 0 x3 y3;
#X text 21 -27 Transposition from http://alumni.media.mit.edu/~cwren/interpolator/
;
#X text 43 29 We have to find the vector l that meets the equation
:;
#X text 38 90 where;
#X text 43 235 B contains the coords of 4 reference points in new system
;
#X text 41 257 If we choose 4 points (-1 \, -1) (1 \, -1) (-1 \, 1)
(1 \, 1) \, we get;
#X text 445 261 =;
#X text 233 148 (Matrix A is as defined in http://alumni.media.mit.edu/~cwren/interpolator/)
;
#X text 514 258 and we can simplify A:;
#X text 451 -6 x y : coords given by input device (example : wiimote)
;
#X text 455 18 X Y : coords mapped in new system;
#X text 44 383 When l is found \, we can easily compute new coords
\, for any point :;
#X text 60 425 ax+by+c;
#X text 45 430 X=________;
#X text 60 443 gx+hy+1;
#X text 190 443 gx+hy+1;
#X text 175 430 Y=________;
#X text 190 425 dx+ey+f;
#X restore 11 95 pd theory/explanations/sources;
#X obj 595 584 outlet error;
#X text 0 467 ax+by+c;
#X text 95 519 dx+ey+f;
#X text 311 521 1/(gx+hy+1);
#X text 5 576 X;
#X text 84 581 Y;
#X text 281 381 l=(A A) A B;
#X text 305 374 T -1 T;
#X obj 669 34 unpack f f f f f f f f;
#X obj 602 193 pack f f f f f f f f f f f f f f f f;
#X obj 820 136 * -1;
#X obj 792 136 * -1;
#X obj 753 133 * -1;
#X obj 725 133 * -1;
#X obj 823 94 * -1;
#X obj 787 94 * -1;
#X obj 748 91 * -1;
#X obj 720 91 * -1;
#X msg 273 79 matrix 8 8 \$1 \$2 1 0 0 0 \$1 \$2 0 0 0 \$1 \$2 1 \$1
\$2 \$3 \$4 1 0 0 0 \$11 \$12 0 0 0 \$3 \$4 1 \$3 \$4 \$5 \$6 1 0 0
0 \$5 \$6 0 0 0 \$5 \$6 1 \$13 \$14 \$7 \$8 1 0 0 0 \$15 \$16 0 0 0
\$7 \$8 1 \$15 \$16;
#X obj 82 414 unpack f f f;
#X obj 161 481 unpack f f f;
#X obj 386 463 unpack f f;
#X msg 380 212 matrix 8 1 -1 -1 1 -1 -1 1 1 1;
#X obj 15 58 import iemmatrix 0.2;
#X obj 224 308 mtx_mul;
#X obj 243 247 mtx_mul;
#X obj 224 344 mtx_mul;
#X obj 271 129 matrix;
#X obj 243 188 mtx_transpose;
#N canvas 0 22 450 300 inverse 0;
#X obj 154 33 inlet;
#X obj 154 63 mtx_pivot;
#X obj 154 85 mtx_inverse;
#X obj 184 131 mtx_*;
#X obj 154 152 mtx_*;
#X obj 154 129 mtx;
#X obj 154 107 t b a;
#X obj 154 195 outlet;
#X obj 226 195 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 1 2 5 1;
#X connect 2 0 6 0;
#X connect 2 1 8 0;
#X connect 3 0 4 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 6 1 3 0;
#X restore 368 318 pd inverse;
#X connect 1 0 43 0;
#X connect 3 0 46 0;
#X connect 3 1 42 1;
#X connect 3 1 43 1;
#X connect 3 2 40 0;
#X connect 4 0 37 0;
#X connect 5 0 38 0;
#X connect 6 0 39 0;
#X connect 7 0 10 0;
#X connect 7 1 11 0;
#X connect 7 2 12 0;
#X connect 8 0 15 0;
#X connect 9 0 15 1;
#X connect 10 0 8 0;
#X connect 11 0 9 0;
#X connect 12 0 8 1;
#X connect 12 0 9 1;
#X connect 13 0 26 0;
#X connect 14 0 7 0;
#X connect 15 0 16 0;
#X connect 26 0 35 0;
#X connect 26 0 27 0;
#X connect 26 1 34 0;
#X connect 26 1 27 1;
#X connect 26 2 33 0;
#X connect 26 2 27 2;
#X connect 26 3 32 0;
#X connect 26 3 27 3;
#X connect 26 4 31 0;
#X connect 26 4 27 4;
#X connect 26 5 30 0;
#X connect 26 5 27 5;
#X connect 26 6 29 0;
#X connect 26 6 27 6;
#X connect 26 7 28 0;
#X connect 26 7 27 7;
#X connect 27 0 36 0;
#X connect 28 0 27 15;
#X connect 29 0 27 14;
#X connect 30 0 27 13;
#X connect 31 0 27 12;
#X connect 32 0 27 11;
#X connect 33 0 27 10;
#X connect 34 0 27 9;
#X connect 35 0 27 8;
#X connect 36 0 45 0;
#X connect 37 0 10 2;
#X connect 37 1 10 3;
#X connect 37 2 10 4;
#X connect 38 0 11 2;
#X connect 38 1 11 3;
#X connect 38 2 11 4;
#X connect 39 0 12 2;
#X connect 39 1 12 3;
#X connect 40 0 44 1;
#X connect 42 0 44 0;
#X connect 43 0 47 0;
#X connect 44 0 4 0;
#X connect 44 0 5 0;
#X connect 45 0 3 0;
#X connect 46 0 1 0;
#X connect 47 1 18 0;
